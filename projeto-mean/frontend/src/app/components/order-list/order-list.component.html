<app-order-create [addOrderToList]="addOrderToList"></app-order-create>

<div class="card order-table">
  <h2 style="text-align: center;">Lista de Pedidos</h2>
  <table class="table">
    <thead>
      <tr>
        <th scope="col">Nome do Pedido</th>
        <th scope="col">Email</th>
        <th scope="col">CPF</th>
        <th scope="col">Produto</th>
        <th scope="col">Fornecedor</th>
        <th scope="col">Opções</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let order of orders" class="order-item">
        <td class="bold-name"> {{ order.name }} </td>
        <td> {{ order.email }} </td>
        <td> {{ order.cpf }} </td>
        <td> {{ order.product.name }} </td>
        <td> {{ order.supplier.name }} </td>
        <td>
          <button class="buttonDelete" (click)="order._id && deleteOrder(order._id)">Delete</button>
          <button class="buttonEdit" (click)="openEditModal(order)">Editar</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<div class="modal" [ngClass]="{ 'is-active': editModalActive }">
  <div class="modal-content">
    <div class="box">
      <h3>Edit Pedido</h3>
      <form [formGroup]="editOrderForm" (ngSubmit)="saveChanges()">
        <label for="name">Nome:</label>
        <input type="text" id="name" formControlName="name" required>
        <label for="email">Email:</label>
        <input type="email" id="email" formControlName="email" required>
        <label for="cpf">CPF:</label>
        <input type="text" id="cpf" formControlName="cpf" required>
        <label for="product">Produto:</label>
        <select formControlName="product" (change)="onProductChange(editOrderForm.get('product')?.value)">
          <option *ngFor="let product of products" [value]="product._id">{{ product.name }}</option>
        </select>
        <label *ngIf="suppliers.length > 0">
          <label for="supplier">Fornecedor:</label>
          <select formControlName="supplier">
            <option *ngFor="let supplier of suppliers" [value]="supplier._id">{{ supplier.name }}</option>
          </select>
        </label>
        <button class="buttonEdit" type="submit">Salvar Alterações</button> <br>
        <button class="buttonDelete" (click)="closeEditModal()">Close</button>
      </form>
    </div>
  </div>
</div>
